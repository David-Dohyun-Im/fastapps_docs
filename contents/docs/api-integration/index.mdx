---
title: API Integration
description: Connect FastApps widgets to external APIs from Python tools and display results in React.
---

Learn how to integrate external APIs into your FastApps widgets.

## Overview

API integration happens in two places:
1. **Python Tool** - Makes the API call, processes data
2. **React Component** - Displays the data

## Basic API Call

### Python Tool

```python
import httpx
from fastapps import BaseWidget, Field, ConfigDict
from pydantic import BaseModel
from typing import Dict, Any

class WeatherInput(BaseModel):
    model_config = ConfigDict(populate_by_name=True)
    city: str = Field(..., description="City to fetch weather for")

class WeatherWidget(BaseWidget):
    identifier = "weather"
    input_model = WeatherInput

    async def execute(self, inputs: WeatherInput) -> Dict[str, Any]:
        async with httpx.AsyncClient() as client:
            response = await client.get(
                "https://api.weatherapi.com/v1/current.json",
                params={"q": inputs.city},
            )
        data = response.json()
        return {"city": inputs.city, "forecast": data["current"]}
```

### React Component

```jsx
import React from "react";
import { useWidgetProps } from "fastapps";

export default function WeatherWidget() {
  const { city, forecast } = useWidgetProps();

  if (!forecast) {
    return <p>Unable to load weather data.</p>;
  }

  return (
    <div>
      <h2>{city}</h2>
      <p>{forecast.condition.text}</p>
      <p>{forecast.temp_f}Â°F</p>
    </div>
  );
}
```

## Handling Errors

```python
try:
    response.raise_for_status()
except httpx.HTTPStatusError:
    return {"error": "Weather service unavailable"}
```

On the frontend:

```jsx
if (props.error) {
  return <p>Sorry, try again later.</p>;
}
```

## API Authentication

### Environment Variables for API Keys

- Use environment variables for API keys
- Load them in Python with `os.getenv`
- Never expose secrets in the widget props

```python
import os

class APIWidget(BaseWidget):
    async def execute(self, inputs):
        api_key = os.getenv("EXTERNAL_API_KEY")
        # Use api_key in your request
```

### User Authentication

For user-specific API calls, see the [Authentication](/docs/auth) guide to learn how to:
- Protect widgets with `@auth_required`
- Access user information via `UserContext`
- Make authenticated requests with user data

```python
from fastapps import BaseWidget, auth_required, UserContext

@auth_required(scopes=["user"])
class UserAPIWidget(BaseWidget):
    async def execute(self, inputs, context, user: UserContext):
        # Access user information
        user_id = user.subject
        # Make user-specific API call
```

## Rate Limits

- Cache responses when possible
- Debounce user-triggered fetches
- Provide helpful fallback messages

## Async vs Sync

- Prefer async tools when calling APIs
- For blocking libraries, run them in executors to keep FastApps responsive

## Next Steps

- [**Authentication**](/docs/auth) - Add OAuth authentication to your widgets
- [**State Management**](/docs/state) - Manage widget state
- [**Styling**](/docs/styling) - Style your widgets
